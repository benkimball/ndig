case msg
when /^:(.+)/ then NdEmoteCommand($1)
when /^\.p(\d+) ?(.+) then NdWhisperCommand($1, $2)
when /^\.y ?(.+)/ then NdYellCommand($1)

if msg =~ /^:(.+)/
  return NdEmoteCommand($1)
elsif msg.starts_with?(.)
  
else
  return NdSayCommand(msg)

NdCommand(Player player, Game game, String msg)
  NdHushCommand
    player.setFlag('hush')
  NdWhoCommand
    player.tell game.getAllPlayers().map(:info)
  NdQuitCommand
    player.shutdown
  NdHelpCommand
    player.tell game.getAllCommands().map(:help)
  NdEmoteCommand
    player.getLocation().getAllPlayers().ignore(player).map(tell emote(msg))
  NdPrivateMessageCommand
    recipient = game.getPlayerByLine(line_number)
    if recipient.ignoring(player)
      player.tell "That user is ignoring you"
    else
      recipient.tell private(msg)
  NdYellCommand
    game.getAllPlayers.ignore(player).map(tell yell(msg))
  NdIgnoreCommand
    player.setIgnore(line_number)
  NdNameCommand
    player.setName(msg)
  NdWhoisCommand
    recipient = game.getPlayerByLine(line_number)
    player.tell recipient.info
  NdSayCommand
    player.getLocation().getAllPlayers().ignore(player).map(tell msg)
